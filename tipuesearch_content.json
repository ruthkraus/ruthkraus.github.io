{"pages":[{"title":"About me","text":"Hello, my name is Alexander Kamyanskiy I like Python programming language and I use it for more than 5 years every day and like to use it for web development, for deployment technologies, for writing tests and many other cool things. This blog I've created to remember things which I already did or learning now or will learn, I think it will be mostly articles about usage python for web development. English is not my native language and feel free to correct me. Also my sorry if I write something wrong. kamyanskiy@gmail.com","tags":"pages","url":"about-me.html"},{"title":"Create Vagrant base box manually from existing one","text":"Vagrant Boxes are prepackaged development environments that are provided by Vagrant. In most cases, this is usually just a stripped and naked operating system such as Ubuntu, Debian, or CentOS. Boxes exist with the intention to be provisioned with additional features like Apache server or PostgreSQL database with Puppet, shell script or anyone of provision tools. The main documentation about Vagrant configuration can be found here This post will describe how to create your own prepackaged Vagrant Box manually from an existing box from https://atlas.hashicorp.com. In my opinion, it's the quickest and easiest way to save time for provisioning default box with Vagrant. We need to provision machine manually once and then use it in the future, of course we can lost flexibility of usual Vagrant approach when I need always run provision process for clean box. This way you'll be able to reuse prepared box over and over and even share it. For example I want to prepare my own box from existing Ubuntu box, many of boxes could be found on https://atlas.hashicorp.com site. I think for my purposes I get hashicorp/precise64 , so I init it: vagrant init hashicorp/precise64 then I need to run it: vagrant up after couple minutes I can enter machine via ssh and start to install things that I think I want to have in my own box: vagrant ssh then do some commands to install mc, postgresql, etc : sudo apt-get update sudo apt-get install -y apache2 sudo apt-get install -y mc sudo apt-get install -y htop sudo apt-get install -y postgresql-9.1 postgresql-server-dev-9.1 libpq-dev python-dev python-setuptools sudo apt-get clean All packages that I want already installed, now I can package that instance to my own box: vagrant package --output mynew.box vagrant box add mynewbox mynew.box vagrant destroy vagrant init mynewbox after that I can run my own box: vagrant up I can also upload that box up to atlas storage kamyanskiy/ubuntu14_psql93 For that there I need to configure provider, version, upload image and then release it.","tags":"Blog","url":"2017/06/prepare-own-vagrant-box-from-existing.html"},{"title":"Use Packer to prepare custom Vagrant box","text":"What is Packer? Packer is an open source tool for creating identical machine images for multiple platforms from a single source configuration. Packer is lightweight, runs on every major operating system, and is highly performant, creating machine images for multiple platforms in parallel. Packer does not replace configuration management like Chef or Puppet. In fact, when building images, Packer is able to use tools like Chef or Puppet to install software onto the image. A machine image is a single static unit that contains a pre-configured operating system and installed software which is used to quickly create new running machines. Machine image formats change for each platform. Some examples include AMIs for EC2 , VMDK / VMX files for VMware, OVF exports for VirtualBox, etc. Packer documentation Here I want to write down how to use template file to prepare my own box from one of base boxes from https://atlas.hashicorp.com site. It's maybe not usual approach, I want just to play with Packer, their arguments, etc. I think probably in real life it's enough to use Vagrantfile with one of provision methods. But here I want to learn how to create my own box from existing base box with Packer. I decided to use hashicorp/precise64 box, so first I init box vagrant init hashicorp/precise64 Then I know that box can be found by path $ HOME /.vagrant/boxes/hashicorp- VAGRANTSLASH -precise64/1.1.0/virtualbox/box.ovf So I want to create my own box with 1Gb RAM , 2 CPU based on initial hashicorp/precise64 box. I want to provision machine with bash script that installs some additional packages, then I want to get my own box as artifact and upload it to my atlas storage. Script bootstrap.sh that I want to ask to Packer to run during provisioning\\ looks like: #!/usr/bin/env bash sudo apt-get update sudo apt-get install -y apache2 if ! [ -L /var/www ] ; then sudo rm -rf /var/www sudo ln -fs /vagrant /var/www fi sudo apt-get install -y mc sudo apt-get install -y htop sudo apt-get install -y postgresql-9.1 postgresql-server-dev-9.1 libpq-dev python-dev python-setuptools sudo apt-get clean Template file called as packer.json : { \"variables\" : { \"home\" : \"{{env `USERPROFILE`}}\" }, \"builders\" : [{ \"type\" : \"virtualbox-ovf\" , \"source_path\" : \"{{ user `home` }}/.vagrant.d/boxes/hashicorp-VAGRANTSLASH-precise64/1.1.0/virtualbox/box.ovf\" , \"ssh_username\" : \"vagrant\" , \"ssh_password\" : \"vagrant\" , \"ssh_wait_timeout\" : \"30s\" , \"guest_additions_mode\" : \"disable\" , \"shutdown_command\" : \"echo 'packer' | sudo -S shutdown -P now\" , \"vboxmanage\" : [ [ \"modifyvm\" , \"{{.Name}}\" , \"--memory\" , \"1024\" ], [ \"modifyvm\" , \"{{.Name}}\" , \"--cpus\" , \"2\" ]] }], \"provisioners\" : [{ \"type\" : \"shell\" , \"script\" : \"bootstrap.sh\" , \"pause_before\" : \"30s\" }], \"post-processors\" : [{ \"type\" : \"vagrant\" , \"keep_input_artifact\" : true , \"output\" : \"box/modified-hashicorp-VAGRANTSLASH-precise64.box\" }, { \"type\" : \"atlas\" , \"artifact\" : \"kamyanskiy/precise64\" , \"artifact_type\" : \"vagrant.box\" , \"metadata\" : { \"provider\" : \"virtualbox\" , \"version\" : \"1.0.0\" } } ] } The one thing, to upload artifact to atlas via ‘atlas' post-processor, I have to create ATLAS_TOKEN and set it to my environment variables. To start Packer to build packer build packer.json After that Virtualbox manager will be shown and process logged into console: When build succeed, I can see my uploaded box in my vagrant boxes list. The one thing, if I upload box via atlas post-processor, this box is uploaded to the not free area and I need to pay money to use it, there Atlas gave me trial 1 month period. I removed box that I played with, but I still can use box that Packer created \"box/modified-hashicorp- VAGRANTSLASH -precise64.box\" vagrant box add mybox modified-hashicorp-VAGRANTSLASH-precise64.box cd ../mybox vagrant init mybox vagrant up So probably the way, when I create box manually on Vagrant site is more preferable for me now, it is free, but yes it requires some additional manual work. It's not so cool like auto create by atlas post-processor. Keep VirtualBOX additions fresh I found that almost all Ubuntu images that I used to play with, have old VirtualBox addition pack. It's very useful plugin to keep always Vbox additions fresh version. The next command installs vagrant-vbguest on machine and every vagrant up command at the end it checks if Vbox additions are freshest and updates it if that is necessary. vagrant plugin install vagrant-vbguest","tags":"Blog","url":"2017/06/use-packer-for-prepare-custom-box.html"},{"title":"Create article from Jupyter .ipynb file with Pelican","text":"/*! * * IPython notebook * */ /* <span class=\"caps\">CSS</span> font colors for translated <span class=\"caps\">ANSI</span> colors. */ .ansibold { font-weight: bold; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; border-left-width: 1px; padding-left: 5px; background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%); } div.cell.jupyter-soft-selected { border-left-color: #<span class=\"caps\">90CAF9</span>; border-left-color: #<span class=\"caps\">E3F2FD</span>; border-left-width: 1px; padding-left: 5px; border-right-color: #<span class=\"caps\">E3F2FD</span>; border-right-width: 1px; background: #<span class=\"caps\">E3F2FD</span>; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected { border-color: #ababab; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #<span class=\"caps\">42A5F5</span> -40px, #<span class=\"caps\">42A5F5</span> 5px, transparent 5px, transparent 100%); } @media print { div.cell.selected { border-color: transparent; } } div.cell.selected.jupyter-soft-selected { border-left-width: 0; padding-left: 6px; background: linear-gradient(to right, #<span class=\"caps\">42A5F5</span> -40px, #<span class=\"caps\">42A5F5</span> 7px, #<span class=\"caps\">E3F2FD</span> 7px, #<span class=\"caps\">E3F2FD</span> 100%); } .edit_mode div.cell.selected { border-color: #<span class=\"caps\">66BB6A</span>; border-left-width: 0px; padding-left: 6px; background: linear-gradient(to right, #<span class=\"caps\">66BB6A</span> -40px, #<span class=\"caps\">66BB6A</span> 5px, transparent 5px, transparent 100%); } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #<span class=\"caps\">303F9F</span>; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In <span class=\"caps\">CM2</span>, this used to be 0.4em, but in <span class=\"caps\">CM3</span> it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ padding: 0.4em; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In <span class=\"caps\">CM3</span> this went to 4px from 0 in <span class=\"caps\">CM2</span>. We need the 0 value because of how we size */ /* .CodeMirror-lines */ padding: 0; border: 0; border-radius: 0; } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #<span class=\"caps\">BA2121</span>; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #<span class=\"caps\">AA22FF</span>; font-weight: bold; } .highlight-meta { color: #<span class=\"caps\">AA22FF</span>; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #<span class=\"caps\">AA22FF</span>; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #<span class=\"caps\">BA2121</span>; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #<span class=\"caps\">AA22FF</span>; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but <span class=\"caps\">FF</span> barfs all over that */ height: 24em; /* <span class=\"caps\">FF</span> needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/<span class=\"caps\">FF</span> */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } .highlight .hll { background-color: #ffffcc } .highlight { background: #f8f8f8; } .highlight .c { color: #408080; font-style: italic } /* Comment */ .highlight .err { border: 1px solid #<span class=\"caps\">FF0000</span> } /* Error */ .highlight .k { color: #008000; font-weight: bold } /* Keyword */ .highlight .o { color: #666666 } /* Operator */ .highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight .cp { color: #<span class=\"caps\">BC7A00</span> } /* Comment.Preproc */ .highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight .gd { color: #A00000 } /* Generic.Deleted */ .highlight .ge { font-style: italic } /* Generic.Emph */ .highlight .gr { color: #<span class=\"caps\">FF0000</span> } /* Generic.Error */ .highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight .gi { color: #00A000 } /* Generic.Inserted */ .highlight .go { color: #888888 } /* Generic.Output */ .highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight .gs { font-weight: bold } /* Generic.Strong */ .highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight .gt { color: #<span class=\"caps\">0044DD</span> } /* Generic.Traceback */ .highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight .kp { color: #008000 } /* Keyword.Pseudo */ .highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight .kt { color: #B00040 } /* Keyword.Type */ .highlight .m { color: #666666 } /* Literal.Number */ .highlight .s { color: #<span class=\"caps\">BA2121</span> } /* Literal.String */ .highlight .na { color: #7D9029 } /* Name.Attribute */ .highlight .nb { color: #008000 } /* Name.Builtin */ .highlight .nc { color: #<span class=\"caps\">0000FF</span>; font-weight: bold } /* Name.Class */ .highlight .no { color: #880000 } /* Name.Constant */ .highlight .nd { color: #<span class=\"caps\">AA22FF</span> } /* Name.Decorator */ .highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight .ne { color: #<span class=\"caps\">D2413A</span>; font-weight: bold } /* Name.Exception */ .highlight .nf { color: #<span class=\"caps\">0000FF</span> } /* Name.Function */ .highlight .nl { color: #<span class=\"caps\">A0A000</span> } /* Name.Label */ .highlight .nn { color: #<span class=\"caps\">0000FF</span>; font-weight: bold } /* Name.Namespace */ .highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight .nv { color: #19177C } /* Name.Variable */ .highlight .ow { color: #<span class=\"caps\">AA22FF</span>; font-weight: bold } /* Operator.Word */ .highlight .w { color: #bbbbbb } /* Text.Whitespace */ .highlight .mb { color: #666666 } /* Literal.Number.Bin */ .highlight .mf { color: #666666 } /* Literal.Number.Float */ .highlight .mh { color: #666666 } /* Literal.Number.Hex */ .highlight .mi { color: #666666 } /* Literal.Number.Integer */ .highlight .mo { color: #666666 } /* Literal.Number.Oct */ .highlight .sa { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Affix */ .highlight .sb { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Backtick */ .highlight .sc { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Char */ .highlight .dl { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Delimiter */ .highlight .sd { color: #<span class=\"caps\">BA2121</span>; font-style: italic } /* Literal.String.Doc */ .highlight .s2 { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Double */ .highlight .se { color: #<span class=\"caps\">BB6622</span>; font-weight: bold } /* Literal.String.Escape */ .highlight .sh { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Heredoc */ .highlight .si { color: #<span class=\"caps\">BB6688</span>; font-weight: bold } /* Literal.String.Interpol */ .highlight .sx { color: #008000 } /* Literal.String.Other */ .highlight .sr { color: #<span class=\"caps\">BB6688</span> } /* Literal.String.Regex */ .highlight .s1 { color: #<span class=\"caps\">BA2121</span> } /* Literal.String.Single */ .highlight .ss { color: #19177C } /* Literal.String.Symbol */ .highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight .fm { color: #<span class=\"caps\">0000FF</span> } /* Name.Function.Magic */ .highlight .vc { color: #19177C } /* Name.Variable.Class */ .highlight .vg { color: #19177C } /* Name.Variable.Global */ .highlight .vi { color: #19177C } /* Name.Variable.Instance */ .highlight .vm { color: #19177C } /* Name.Variable.Magic */ .highlight .il { color: #666666 } /* Literal.Number.Integer.Long */ /* Temporary definitions which will become obsolete with Notebook release 5.0 */ .ansi-black-fg { color: #<span class=\"caps\">3E424D</span>; } .ansi-black-bg { background-color: #<span class=\"caps\">3E424D</span>; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #<span class=\"caps\">E75C58</span>; } .ansi-red-bg { background-color: #<span class=\"caps\">E75C58</span>; } .ansi-red-intense-fg { color: #<span class=\"caps\">B22B31</span>; } .ansi-red-intense-bg { background-color: #<span class=\"caps\">B22B31</span>; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #<span class=\"caps\">DDB62B</span>; } .ansi-yellow-bg { background-color: #<span class=\"caps\">DDB62B</span>; } .ansi-yellow-intense-fg { color: #<span class=\"caps\">B27D12</span>; } .ansi-yellow-intense-bg { background-color: #<span class=\"caps\">B27D12</span>; } .ansi-blue-fg { color: #<span class=\"caps\">208FFB</span>; } .ansi-blue-bg { background-color: #<span class=\"caps\">208FFB</span>; } .ansi-blue-intense-fg { color: #<span class=\"caps\">0065CA</span>; } .ansi-blue-intense-bg { background-color: #<span class=\"caps\">0065CA</span>; } .ansi-magenta-fg { color: #<span class=\"caps\">D160C4</span>; } .ansi-magenta-bg { background-color: #<span class=\"caps\">D160C4</span>; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #<span class=\"caps\">60C6C8</span>; } .ansi-cyan-bg { background-color: #<span class=\"caps\">60C6C8</span>; } .ansi-cyan-intense-fg { color: #<span class=\"caps\">258F8F</span>; } .ansi-cyan-intense-bg { background-color: #<span class=\"caps\">258F8F</span>; } .ansi-white-fg { color: #<span class=\"caps\">C5C1B4</span>; } .ansi-white-bg { background-color: #<span class=\"caps\">C5C1B4</span>; } .ansi-white-intense-fg { color: #<span class=\"caps\">A1A6B2</span>; } .ansi-white-intense-bg { background-color: #<span class=\"caps\">A1A6B2</span>; } .ansi-bold { font-weight: bold; } It's possible to create article from .ipynb file, just add file to my pelican site content folder and create file with the same name but with extension .ipybn-meta , with next content: Title: Function annotations Category: Blog Tags: jupyter, notebook Then during pelican generates site, if \"ipynb.markup\" plugin installed properly, it will be article like you see now. All content here was created in Jupyter , stored on disk as functions-annotations.ipynb , then file functions-annotations.ipynb-meta was created with content I posted above and then Pelican creates html with proper markup. Functions annotations Function annotations are completely optional metadata information about the types used by user-defined functions (see PEP 484 for more information). Annotations are stored in the __annotations__ attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal ->, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated: In [1]: def func ( var : int ) -> int : print ( \"Annotations:\" , func . __annotations__ ) return var func ( 5 ) Annotations: {'var': , 'return': } Out[1]: 5 It's possible to annotate functions in python 3 if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) { var mathjaxscript = document.createElement('script'); mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#'; mathjaxscript.type = 'text/javascript'; mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'; mathjaxscript[(window.opera ? \"innerHTML\" : \"text\")] = \"MathJax.Hub.Config({\" + \" config: ['MMLorHTML.js'],\" + \" TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },\" + \" jax: ['input/TeX','input/MathML','output/HTML-CSS'],\" + \" extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],\" + \" displayAlign: 'center',\" + \" displayIndent: '0em',\" + \" showMathMenu: true,\" + \" tex2jax: { \" + \" inlineMath: [ ['$','$'] ], \" + \" displayMath: [ ['$$','$$'] ],\" + \" processEscapes: true,\" + \" preview: 'TeX',\" + \" }, \" + \" 'HTML-CSS': { \" + \" linebreaks: { automatic: true, width: '95% container' }, \" + \" styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }\" + \" } \" + \"}); \"; (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript); }","tags":"Blog","url":"2017/06/Functions-annotations.html"},{"title":"Pelican plugin for Jupyter/IPython Notebooks","text":"Today I read about nice thing that called as Jupyter I installed its locally, it's cool to play with python there and store results in files with .ipynb extension locally. Then I found that it is plugin pelican-ipynb for Pelican. With that plugin enabled, Pelican easy creates html pages with proper markup like into Jupyter. I'll try to use it sometimes, to avoid copying code samples from ipython console to markdown files. Its possible to convert .ipynb content to nice formatted article ! So I created separate plugins folder in my site hierarchy and cloned repo pelican-ipynb into my plugins folder to ipynb directory. $ git clone https://github.com/danielfrg/pelican-ipynb ipynb So my tree looks like plugins/ └── ipynb ├── core.py ├── __init__.py ├── ipynb.py ├── liquid.py ├── markup.py ... In pelicanconf.py file I added \"ipynb.markup\" to PLUGINS list. PLUGINS = [ 'i18n_subsites' , 'related_posts' , \"tag_cloud\" , \"tipue_search\" , \"ipynb.markup\" ] Then add MARKUP = ( 'md' , 'ipynb' ) And added new plugins path PLUGIN_PATHS = ['pelican-plugins/', 'plugins/'] That's all settings. In next article I'll try to use this plugin. P.S. I had to fork ipynb repo and did little fix, to make date in metadata file .ipynb-meta not mandatory. So now I use fork pelican-ipynb","tags":"Blog","url":"2017/06/add-ipynb-plugin-to-pelican.html"},{"title":"How to add DISQUS comments to Pelican site","text":"It is possible to attach DISQUS comments to blog site. Setup your DISQUS Account Before you can use the commenting stuff, you need to register into Disqus. There you find a lot of disqus documentation that you simply not need :-) . Pelican already has done that for you. Register on DISQUS site Select ‘I don't see my platform listed, install manually with Universal Code. Remember ‘Shortname'=kamyanskiy, it will be used later in site configuration. Fill fields Website name and Website URL . Check ‘Allow guests to comments' Finish settings with Add trusted site, my own is kamyanskiy.github.io Into pelicanconf.py file enable DISQUS , just add these settings: DISQUS_SITENAME = \"kamyanskiy\" Remember, here should be added ‘shortname' from step 3. That's done, now generate content and check that comments working fine:","tags":"Blog","url":"2017/06/how-to-add-disqus-comments.html"},{"title":"Start blog site on GitHub pages with Pelican","text":"One day I found that I forgot many things I learned and used before, so I decided to make short memos about different programming aspects, issues and new tools I'll learn and touch in the future. Create GitHub user page GitHub provides easy and nice possibility to create your own site with User Pages So as described in this tutoral I've created repo with special name kamyanskiy.github.io The content from master branch from this repo should be used to display on access https://kamyanskiy.github.io url. Create site with Pelican I found that possibility that provided from GitHub to have static pages with jekyll is nice, but Pelican is more powerful tool, with rich number of plugins and nice themes. So I checkout my kamyanskiy.github.io repository from branch master to pelican branch and start to install Pelican. Step 1. Install Pelican. $ virtualenv -p python3.6 .env $ source .env/bin/activate ( .env ) $ pip install pelican markdown Step 2. Get pelican-plugins and pelican-themes submodules After review many nice themes on site http://www.pelicanthemes.com/ I've decided to use pelican-bootstrap3 theme, with little changes, so I've forked pelican-themes repo to make custom changes. $ git submodule add git@github.com:getpelican/pelican-plugins.git pelican-plugins $ git submodule add https://github.com/kamyanskiy/pelican-themes pelican-themes Step 3. Create simple site template Once Pelican has been installed, you can create a skeleton project via the pelican-quickstart command, which begins by asking some questions about your site. pelican-quickstart Then answer to questions or keep just all defaults, it's possible to change all later, manually in file pelicanconf.py Step 4. Configure pelicanconf.py The all possible settings are described in documentation My settings file looks like: #!/usr/bin/env python # -*- coding: utf-8 -*- # from __future__ import unicode_literals AUTHOR = 'Alexander Kamyanskiy' SITENAME = 'kamyanskiy.github.io' SITEURL = 'https://kamyanskiy.github.io' PATH = 'content' TIMEZONE = 'Europe/Moscow' DEFAULT_LANG = 'en' # Feed generation is usually not desired when developing FEED_ALL_ATOM = None CATEGORY_FEED_ATOM = None TRANSLATION_FEED_ATOM = None AUTHOR_FEED_ATOM = None AUTHOR_FEED_RSS = None SHOW_ARTICLE_AUTHOR = True SHOW_DATE_MODIFIED = True # Show my last activity on GitHub GITHUB_USER = 'kamyanskiy' # Enable custom theme THEME = \"pelican-themes/pelican-bootstrap3/\" BOOTSTRAP_THEME = \"flatly\" JINJA_ENVIRONMENT = { 'extensions' : [ 'jinja2.ext.i18n' ]} PYGMENTS_STYLE = 'emacs' DEFAULT_DATE = 'fs' # Enable plugins PLUGIN_PATHS = [ 'pelican-plugins/' ] PLUGINS = [ 'i18n_subsites' ] # Enable disqus comments DISQUS_SITENAME = \"kamyanskiy\" SITELOGO = 'images/logo.png' STATIC_PATHS = [ 'images' , 'extra/custom.css' ] CUSTOM_CSS = 'theme/css/custom.css' EXTRA_PATH_METADATA = { 'extra/custom.css' : { 'path' : 'theme/css/custom.css' } } # Blogroll LINKS = (( 'Pelican' , 'http://getpelican.com/' ), ( 'Python.org' , 'http://python.org/' ), ( 'Jinja2' , 'http://jinja.pocoo.org/' ), ( 'Django' , 'https://https://docs.djangoproject.com/' ), ( 'Flask' , 'http://flask.pocoo.org/' ), ) # Social widget SOCIAL = (( 'vk' , 'https://vk.com/id216671695' ), ( 'Facebook' , 'https://www.facebook.com/alexander.kamyanskiy' ), ( 'GitHub' , 'https://github.com/kamyanskiy' ),) DEFAULT_PAGINATION = 5 # Uncomment following line if you want document-relative URLs when developing RELATIVE_URLS = False DELETE_OUTPUT_DIRECTORY = True TYPOGRIFY = True Step 5. Add some content I've added this page in .md format into content/20170613-start-site-with-pelican.md file Step 6. Use Fabric to manage site It's possible to use fabric utility to make some useful things with site content, like run dev server and push changes to GitHub pages I've used Fabric3 to use with python3.6 on my machine Install Fabric3 pip install fabric3 ghp - import Fix fabfile.py (for usage with python3) Change import SocketServer to import socketserver To use fab command to start dev server , run $ fab serve To publish content to master branch on github repo, run $ fab gh_pages P.S. After couple days I've changed this command to fab push Part 2 - How to enable DISQUS comments","tags":"Blog","url":"2017/06/start-site-with-pelican.html"}]}